# 北京云听音频精修系统 - 原型交互分析报告

**分析日期**: 2024年  
**原型地址**: https://modao.cc/proto/oakOzJNt5hjuc3p2NX5JI/sharing?view_mode=device&screen=rbpV26jSLVVgDkJyO&canvasId=rcV26lh0g5ORjepI  
**分析方式**: 通过 Chrome MCP 实际访问原型页面

---

## 一、原型页面总览

原型共包含 **25个页面**，完整页面列表如下：

1. **文本输入页面**
2. **自动拆句后结果页面**
3. **精修页面**
4. **精修页面-音色调整**
5. **精修页面 -音色单句调整**
6. **声音大小调整**
7. **语速调整**
8. **语速调整2**
9. **语速调整3**
10. **断句标准**
11. **停顿**
12. **多音字**
13. **插入静音**
14. **向下插入**
15. **播放**
16. **单句重新合成**
17. **合并音频**
18. **清空文本**
19. **阅读规范**
20. **阅读规范-连读**
21. **阅读规范-数字英文**
22. **阅读规范-音标**
23. **阅读规范设置-数字英文**
24. **阅读规范设置-音标**
25. **阅读规范设置-专有词汇**

---

## 二、核心页面详细分析

### 2.1 文本输入页面

#### 界面元素
- **页面标题**: "音频精修"
- **文本输入框**: 
  - 占位符："请输入需要精修文本"
  - 字数限制提示："字数支持1万字"
  - 实时字数统计显示（示例：6328字）
- **拆句规则选择区域**:
  - 标题："拆句规则："
  - 复选框选项：
    - ☑ 句号
    - ☑ 叹号
    - ☑ 问号
    - ☑ 省略号
- **操作按钮**:
  - "自动拆句" 按钮（主要操作）

#### 交互流程
1. 用户在文本输入框中输入或粘贴文本内容
2. 系统实时显示字数统计
3. 用户选择拆句规则（可多选）
4. 点击"自动拆句"按钮
5. 系统自动拆句并跳转到"自动拆句后结果页面"

#### 设计要点
- 支持最多1万字文本输入
- 拆句规则可自定义选择
- 实时字数反馈

---

### 2.2 自动拆句后结果页面

#### 界面元素
- **顶部操作栏**:
  - "合并音频" 按钮
- **句子列表**（倒序显示）:
  - 每个句子项包含：
    - **句子标识**: "拆句1"、"拆句2"、"拆句3"、"拆句4" 等
    - **句子内容**: 显示拆句后的文本内容
    - **时长显示**: "500"（毫秒）
    - **操作按钮组**:
      - "编辑" 按钮
      - "删除" 按钮
      - "向下插入" 按钮
      - "重新合成" 按钮
      - "播放" 按钮

#### 交互流程
1. 显示所有拆句后的句子列表
2. 每个句子可以独立操作：
   - 编辑：修改句子内容
   - 删除：删除该句子
   - 向下插入：在该句子下方插入新句子
   - 重新合成：重新生成该句子的音频
   - 播放：播放该句子的音频
3. 点击"合并音频"按钮可合并所有句子的音频

#### 设计要点
- 句子按顺序编号显示
- 每个句子独立操作，互不影响
- 支持单句音频播放预览

---

### 2.3 精修页面（核心页面）

#### 界面布局结构

**左侧区域 - 音色和参数控制**:
- **音色选择区域**:
  - 标题："选择音库"
  - 音色列表（示例）:
    - 杨富江3.0
    - 张宇3.0VC
    - 唐琦3.0
    - 张宇
    - 唐琦
  - 音色分类标签：
    - "新闻"
    - "小说"
    - "输入文本"
    - "个性定制"
- **参数调整区域**:
  - "音量" 滑块
  - "语速" 滑块
  - 显示当前值（示例：6/5000）

**中间区域 - 句子列表**:
- **顶部操作栏**:
  - "音频精修" 标题
  - "全部合成" 按钮
  - "保存当前音频" 按钮
  - "清空文本" 按钮
- **句子列表**:
  - 每个句子项显示：
    - 句子序号（拆句1、拆句2等）
    - 句子内容（支持内联编辑标记）
    - 特殊标记显示：
      - 停顿标记："500ms"（可删除）
      - 多音字标记："中"（可删除）
      - 其他标记图标（可删除）
    - 操作按钮：
      - "编辑"
      - "删除"
      - "向下插入"
      - "重新合成" / "合成"
      - "播放"
    - 状态显示：
      - "未合成" 状态
      - 时长显示："500"

**右侧区域 - 功能按钮**:
- "断句标准" 按钮
- "停顿" 按钮
- "多音字" 按钮
- "插入静音" 按钮
- "音色调整" 按钮
- "阅读规范" 按钮

**底部区域**:
- "合并音频" 按钮
- 合并音频时长显示："500"

#### 特殊标记说明
根据原型标注：
- **500ms图标**：停顿标记，可直接删除
- **"中"图标**：多音字标记，可直接删除
- **"de"图标**：其他标记，可直接删除
- 所有图标功能都支持删除操作

#### 交互流程

**音色调整流程**:
1. 在左侧音色列表中选择音色
2. 可以按分类筛选（新闻、小说等）
3. 选择后应用到当前句子或全部句子

**参数调整流程**:
1. 调整"音量"滑块（范围：0-5000，示例显示6/5000）
2. 调整"语速"滑块
3. 参数实时生效，需要重新合成音频

**句子编辑流程**:
1. 点击句子上的"编辑"按钮
2. 在句子文本中可以直接编辑
3. 可以添加停顿、多音字等标记
4. 保存后更新句子内容

**添加停顿流程**:
1. 点击右侧"停顿"按钮
2. 在句子文本中选择位置
3. 设置停顿时长（如500ms）
4. 文本中显示"500ms"标记
5. 可以删除该标记

**添加多音字流程**:
1. 点击右侧"多音字"按钮
2. 在句子文本中选择字符
3. 选择正确的读音
4. 文本中显示多音字标记（如"中"）
5. 可以删除该标记

**插入静音流程**:
1. 点击右侧"插入静音"按钮
2. 在句子中选择位置
3. 设置静音时长
4. 在文本中显示静音标记

**向下插入流程**:
1. 点击句子上的"向下插入"按钮
2. 输入新句子内容
3. 新句子插入到当前句子下方
4. **重要**：插入的句子音色默认与上一句相同
5. 如需更改音色，点击单句后方的"音色调整"按钮

**合成流程**:
1. **单句合成**：点击句子上的"合成"或"重新合成"按钮
2. **全部合成**：点击顶部"全部合成"按钮
3. 合成状态显示："未合成" → "合成中" → "已合成"
4. 合成完成后可以播放预览

**合并音频流程**:
1. 点击"合并音频"按钮
2. 系统合并所有已合成的句子音频
3. 显示合并后的总时长
4. 可以播放合并后的完整音频

#### 设计要点
- **音色顺序**：李羚瑞、唐琦、杨富江、张宇、张根清、张东
- **默认音源**：李羚瑞
- 所有标记（停顿、多音字等）都支持直接删除
- 向下插入的句子音色继承上一句，但可以单独修改

---

### 2.4 精修页面-音色调整

#### 界面元素
- 音色选择界面
- 支持按分类筛选
- 支持单句音色调整

#### 交互流程
1. 点击"音色调整"按钮
2. 显示音色选择界面
3. 选择音色后应用到指定句子
4. 可以批量应用到多个句子

---

### 2.5 声音大小调整页面

#### 界面元素
- 音量调整滑块
- 实时数值显示
- 应用到单句或全部句子

---

### 2.6 语速调整页面（3个变体）

#### 界面元素
- 语速调整滑块
- 实时数值显示
- 不同调整方式的变体页面

---

### 2.7 断句标准页面

#### 界面元素
- 断句规则设置
- 可配置的断句标准选项

---

### 2.8 停顿页面

#### 界面元素
- 停顿设置界面
- 在句子中选择位置
- 设置停顿时长

---

### 2.9 多音字页面

#### 界面元素
- 多音字选择界面
- 在句子中选择字符
- 选择正确的读音

---

### 2.10 插入静音页面

#### 界面元素
- 静音设置界面
- 在句子中选择位置
- 设置静音时长

---

### 2.11 向下插入页面

#### 界面元素
- 新句子输入框
- 插入位置确认
- 音色继承说明

#### 重要说明
- 插入的句子音色默认与上一句相同
- 如需更改音色，点击单句后方的按钮进行修改

---

### 2.12 播放页面

#### 界面元素
- 音频播放器
- 播放进度显示
- 播放控制按钮

---

### 2.13 单句重新合成页面

#### 界面元素
- 重新合成确认
- 参数显示
- 合成进度

---

### 2.14 合并音频页面

#### 界面元素
- 合并进度显示
- 合并后音频播放器
- 下载按钮

---

### 2.15 清空文本页面

#### 界面元素
- 清空确认对话框
- 警告提示

---

### 2.16-2.25 阅读规范相关页面

#### 阅读规范主页面
- 阅读规范列表
- 创建新规范按钮

#### 阅读规范-连读
- 连读规则设置
- 连读模式选择

#### 阅读规范-数字英文
- 数字和英文的阅读规则
- 规则配置界面

#### 阅读规范-音标
- 音标设置界面
- 音标规则配置

#### 阅读规范设置页面（3个）
- **数字英文设置**：数字和英文的详细规则配置
- **音标设置**：音标的详细规则配置
- **专有词汇设置**：专有词汇的规则配置

---

## 三、交互流程总结

### 3.1 主要用户流程

#### 流程1：文本输入 → 自动拆句 → 精修
1. 进入"文本输入页面"
2. 输入文本内容（最多1万字）
3. 选择拆句规则
4. 点击"自动拆句"
5. 跳转到"自动拆句后结果页面"
6. 查看拆句结果
7. 进入"精修页面"进行音频精修

#### 流程2：音频精修完整流程
1. 在"精修页面"选择音色
2. 调整参数（音量、语速）
3. 对句子进行编辑（添加停顿、多音字等）
4. 合成单句或全部合成
5. 播放预览
6. 合并音频
7. 保存或下载

#### 流程3：单句精修流程
1. 选择要精修的句子
2. 点击"编辑"修改内容
3. 添加停顿、多音字等标记
4. 调整音色和参数
5. 重新合成
6. 播放预览

---

## 四、关键交互细节

### 4.1 标记删除机制
- **所有标记都支持直接删除**：
  - 停顿标记（500ms图标）
  - 多音字标记（"中"图标）
  - 其他标记（"de"图标等）
- 删除方式：点击标记图标即可删除

### 4.2 音色继承规则
- **向下插入的句子**：音色默认与上一句相同
- **修改音色**：点击单句后方的"音色调整"按钮可单独修改

### 4.3 参数调整范围
- **音量**：0-5000（示例显示：6/5000）
- **语速**：可调整范围（具体范围需确认）
- 参数调整后需要重新合成才能生效

### 4.4 合成状态管理
- **未合成**：句子尚未生成音频
- **合成中**：正在生成音频
- **已合成**：音频已生成，可以播放

### 4.5 音色列表顺序
根据原型标注：
1. 李羚瑞（默认）
2. 唐琦
3. 杨富江
4. 张宇
5. 张根清
6. 张东

---

## 五、界面设计要点

### 5.1 布局结构
- **左侧**：音色选择和参数调整
- **中间**：句子列表和编辑区域
- **右侧**：功能按钮（断句标准、停顿、多音字等）
- **顶部**：主要操作按钮（全部合成、保存等）
- **底部**：合并音频按钮

### 5.2 视觉反馈
- 句子状态明确标识（未合成、已合成）
- 标记在文本中直观显示
- 参数调整实时显示数值
- 操作按钮状态清晰

### 5.3 交互反馈
- 所有操作都有明确的视觉反馈
- 标记支持直接删除
- 参数调整实时更新
- 合成状态实时显示

---

## 六、与API设计的对应关系

### 6.1 页面与API接口映射

| 页面/功能 | 对应API接口 |
|----------|------------|
| 文本输入页面 | POST /tasks |
| 自动拆句后结果页面 | GET /tasks?task_id={task_id} |
| 精修页面-音色调整 | GET /voices, POST /sentences/settings |
| 声音大小调整 | POST /sentences/settings (volume参数) |
| 语速调整 | POST /sentences/settings (speech_rate参数) |
| 断句标准 | GET /sentence-breaking/standards |
| 停顿 | POST /sentences/{sentence_id}/pauses |
| 多音字 | POST /sentences/{sentence_id}/polyphonic |
| 插入静音 | POST /sentences/{sentence_id}/silence |
| 向下插入 | POST /sentences/{sentence_id}/insert-below |
| 播放 | GET /sentences?sentence_id={sentence_id} (audio_url) |
| 单句重新合成 | POST /sentences/{sentence_id}/resynthesize |
| 合并音频 | POST /tasks/{task_id}/audio/merge |
| 阅读规范 | POST /reading-rules, GET /reading-rules |

### 6.2 数据流对应

**文本输入流程**:
- 用户输入 → POST /tasks → 返回任务和句子列表 → 显示在"自动拆句后结果页面"

**精修流程**:
- 调整参数 → POST /sentences/settings → 更新数据库 → 刷新界面
- 添加停顿 → POST /sentences/{id}/pauses → 更新SSML → 刷新界面
- 合成音频 → POST /sentences/{id}/synthesize → 轮询状态 → 更新audio_url

**合并流程**:
- 点击合并 → POST /tasks/{id}/audio/merge → 返回merge_id → 轮询状态 → 更新merged_audio_url

---

## 七、原型分析总结

### 7.1 核心功能确认
✅ **文本输入和拆句**：支持最多1万字，可自定义拆句规则  
✅ **句子管理**：列表展示，支持编辑、删除、插入  
✅ **音色选择**：6种音色，支持分类筛选，默认李羚瑞  
✅ **参数调整**：音量、语速可调整，实时反馈  
✅ **标记功能**：停顿、多音字、静音标记，支持删除  
✅ **音频合成**：单句合成、全部合成、重新合成  
✅ **音频合并**：合并所有句子音频  
✅ **阅读规范**：支持多种阅读规范设置  

### 7.2 交互设计亮点
- **直观的标记显示**：停顿、多音字等标记直接在文本中显示
- **灵活的编辑方式**：支持内联编辑和标记删除
- **清晰的音色继承**：向下插入的句子音色继承上一句
- **实时参数反馈**：参数调整实时显示数值
- **状态明确标识**：合成状态、操作状态清晰显示

### 7.3 需要实现的关键点
1. **标记删除机制**：所有标记（停顿、多音字等）都支持直接删除
2. **音色继承规则**：向下插入的句子音色默认与上一句相同
3. **参数范围**：音量范围0-5000，需要确认语速范围
4. **音色顺序**：按照指定顺序显示音色列表
5. **实时反馈**：所有操作都需要实时反馈和状态更新

---

## 八、开发建议

### 8.1 前端实现建议
- 使用 Vue.js + Element Plus 实现界面
- 实现可编辑的文本组件，支持内联标记显示
- 实现标记删除功能（点击标记即可删除）
- 实现实时参数调整和反馈
- 实现音频播放器组件

### 8.2 交互优化建议
- 添加操作确认对话框（删除、清空等）
- 添加操作撤销功能
- 添加批量操作功能
- 优化移动端适配

### 8.3 性能优化建议
- 句子列表使用虚拟滚动
- 音频文件懒加载
- 参数调整使用防抖
- 合成状态使用轮询或WebSocket

---

**文档版本**: v1.0  
**最后更新**: 2024年  
**分析工具**: Chrome MCP DevTools

