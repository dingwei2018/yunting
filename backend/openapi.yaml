openapi: 3.0.3
info:
  title: 云听音频精修系统 API
  description: |
    云听音频精修系统完整 API 文档
    
    本系统提供以下功能模块：
    - 任务管理：创建任务、获取任务详情
    - 拆句管理：获取拆句列表、删除拆句
    - 合成管理：合成断句、拆句、任务，设置合成参数，查询合成状态
    - 阅读规范：创建阅读规范、获取列表、匹配字段
    - 语音配置：获取语音列表
    - 音频合并：合并音频、查询合并状态
    - 健康检查：服务健康状态
    
    所有接口统一使用 ApiResponse 包装返回数据。
  version: 1.0.0
  contact:
    name: API Support
    email: support@example.com

servers:
  - url: http://localhost:8080
    description: 本地开发环境
  - url: https://api.example.com
    description: 生产环境

tags:
  - name: 健康检查
    description: 服务健康状态检查
  - name: 任务管理
    description: 任务创建和查询
  - name: 拆句管理
    description: 拆句列表查询和删除
  - name: 合成管理
    description: 音频合成相关接口
  - name: 阅读规范
    description: 阅读规范管理
  - name: 语音配置
    description: 语音配置查询
  - name: 音频合并
    description: 音频合并相关接口

paths:
  /api/health:
    get:
      tags:
        - 健康检查
      summary: 健康检查
      description: 检查服务运行状态
      operationId: health
      responses:
        '200':
          description: 服务运行正常
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_MapStringString'

  /api/task/create:
    post:
      tags:
        - 任务管理
      summary: 创建任务
      description: |
        创建任务时会自动进行拆句处理（根据指定的拆句符号拆句）
        拆句完成后，每条拆句记录默认会生成一条断句记录
      operationId: createTask
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TaskCreateRequest'
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_TaskCreateResponseDTO'

  /api/task/getDetail:
    get:
      tags:
        - 任务管理
      summary: 获取任务详情
      description: 返回任务详情以及任务下的拆句内容
      operationId: getTaskDetail
      parameters:
        - name: taskid
          in: query
          required: true
          description: 任务ID
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_TaskDetailDTO'

  /api/originalSentence/getOriginalSentenceList:
    get:
      tags:
        - 拆句管理
      summary: 获取拆句列表
      description: 获取指定任务下的拆句列表，支持分页
      operationId: getOriginalSentenceList
      parameters:
        - name: taskid
          in: query
          required: true
          description: 任务ID
          schema:
            type: integer
            format: int64
        - name: page
          in: query
          required: false
          description: 页码
          schema:
            type: integer
            default: 1
        - name: page_size
          in: query
          required: false
          description: 每页大小
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_OriginalSentenceListResponseDTO'

  /api/originalSentence/delete:
    post:
      tags:
        - 拆句管理
      summary: 删除拆句
      description: 删除指定的拆句
      operationId: deleteOriginalSentence
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OriginalSentenceDeleteRequest'
      responses:
        '200':
          description: 删除成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_String'

  /api/synthesis/breakingSentence:
    post:
      tags:
        - 合成管理
      summary: 合成断句
      description: 合成或重新合成单个断句
      operationId: synthesizeBreakingSentence
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SynthesisBreakingSentenceRequest'
      responses:
        '200':
          description: 合成请求已提交
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_String'

  /api/synthesis/originalSentence:
    post:
      tags:
        - 合成管理
      summary: 合成拆句
      description: 合成或重新合成拆句下的所有断句
      operationId: synthesizeOriginalSentence
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SynthesisOriginalSentenceRequest'
      responses:
        '200':
          description: 合成请求已提交
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_String'

  /api/synthesis/task:
    post:
      tags:
        - 合成管理
      summary: 合成任务
      description: 合成或重新合成任务下的所有断句
      operationId: synthesizeTask
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SynthesisTaskRequest'
      responses:
        '200':
          description: 合成请求已提交
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_String'

  /api/synthesis/setConfig:
    post:
      tags:
        - 合成管理
      summary: 设置拆句合成参数
      description: 设置拆句的合成参数，覆盖旧数据
      operationId: setConfig
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SynthesisSetConfigRequest'
      responses:
        '200':
          description: 配置更新成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_String'

  /api/synthesis/callback:
    post:
      tags:
        - 合成管理
      summary: 华为云TTS回调接口
      description: |
        接收华为云TTS异步任务的回调通知
        将回调请求发送到RocketMQ消息队列，由消费者异步处理
      operationId: handleTtsCallback
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TtsCallbackRequest'
      responses:
        '200':
          description: 回调消息已发送到消息队列
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_String'

  /api/synthesis/getBreakingSentenceStatus:
    get:
      tags:
        - 合成管理
      summary: 获取断句合成状态
      description: |
        给出单句断句的合成状态和已完成合成的音频文件下载地址和时长
      operationId: getBreakingSentenceStatus
      parameters:
        - name: breakingSentenceId
          in: query
          required: true
          description: 断句ID
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_SynthesisResultDTO'

  /api/synthesis/getOriginalSentenceStatus:
    get:
      tags:
        - 合成管理
      summary: 获取拆句合成状态
      description: |
        给出拆句下所有断句的合成进度和已完成合成的音频文件下载地址和时长
      operationId: getOriginalSentenceStatus
      parameters:
        - name: originalSentenceId
          in: query
          required: true
          description: 拆句ID
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_OriginalSentenceSynthesisStatusDTO'

  /api/synthesis/getTaskStatus:
    get:
      tags:
        - 合成管理
      summary: 获取任务合成状态
      description: |
        给出任务下所有断句的合成进度和已完成合成的音频文件下载地址和时长
      operationId: getTaskStatus
      parameters:
        - name: taskid
          in: query
          required: true
          description: 任务ID
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_TaskSynthesisStatusDTO'

  /api/readingRule/create:
    post:
      tags:
        - 阅读规范
      summary: 创建阅读规范
      description: 创建新的阅读规范
      operationId: createReadingRule
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReadingRuleCreateRequest'
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_ReadingRuleCreateResponseDTO'

  /api/readingRule/setGlobalSetting:
    post:
      tags:
        - 阅读规范
      summary: 开关全局阅读规范
      description: 设置全局阅读规范的开关状态
      operationId: setGlobalSetting
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReadingRuleSetGlobalSettingRequest'
      responses:
        '200':
          description: 设置成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_String'

  /api/readingRule/getList:
    get:
      tags:
        - 阅读规范
      summary: 获取阅读规范列表
      description: 获取阅读规范列表（支持分页和筛选）
      operationId: getReadingRuleList
      parameters:
        - name: task_id
          in: query
          required: false
          description: 任务ID（可选）
          schema:
            type: integer
            format: int64
        - name: ruleType
          in: query
          required: false
          description: 规则类型（可选）
          schema:
            type: integer
        - name: page
          in: query
          required: true
          description: 页码（必填）
          schema:
            type: integer
        - name: pageSize
          in: query
          required: true
          description: 每页大小（必填）
          schema:
            type: integer
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_ReadingRuleListPageResponseDTO'

  /api/readingRule/getMatchingFieldListFromText:
    get:
      tags:
        - 阅读规范
      summary: 获取文本中符合规则的字段列表
      description: 从文本中提取符合阅读规则的字段列表
      operationId: getMatchingFieldListFromText
      parameters:
        - name: text
          in: query
          required: false
          description: 文本内容（可选）
          schema:
            type: string
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_MatchingFieldListResponseDTO'

  /api/voice/getList:
    get:
      tags:
        - 语音配置
      summary: 获取语音列表
      description: 获取所有可用的语音配置列表
      operationId: getVoices
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_VoiceConfigListResponseDTO'

  /api/merge/audio:
    post:
      tags:
        - 音频合并
      summary: 合并音频
      description: 合并任务下的所有音频文件
      operationId: mergeAudio
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AudioMergeRequest'
      responses:
        '200':
          description: 合并请求已提交
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_AudioMergeResponseDTO'

  /api/merge/getStatus:
    get:
      tags:
        - 音频合并
      summary: 获取合并状态
      description: 查询音频合并任务的状态
      operationId: getStatus
      parameters:
        - name: mergeId
          in: query
          required: true
          description: 合并任务ID
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse_AudioMergeStatusDTO'

components:
  schemas:
    ApiResponse_MapStringString:
      type: object
      properties:
        code:
          type: integer
          description: 响应码，10200表示成功
          example: 10200
        message:
          type: string
          description: 响应消息
          example: success
        data:
          type: object
          additionalProperties:
            type: string
          description: 响应数据
          example:
            status: UP
            message: 服务运行正常
        timestamp:
          type: integer
          format: int64
          description: 时间戳（毫秒）
          example: 1640000000000

    ApiResponse_String:
      type: object
      properties:
        code:
          type: integer
          description: 响应码，10200表示成功
          example: 10200
        message:
          type: string
          description: 响应消息
          example: success
        data:
          type: string
          description: 响应数据
        timestamp:
          type: integer
          format: int64
          description: 时间戳（毫秒）

    ApiResponse_TaskCreateResponseDTO:
      type: object
      properties:
        code:
          type: integer
          example: 10200
        message:
          type: string
          example: success
        data:
          $ref: '#/components/schemas/TaskCreateResponseDTO'
        timestamp:
          type: integer
          format: int64

    ApiResponse_TaskDetailDTO:
      type: object
      properties:
        code:
          type: integer
          example: 10200
        message:
          type: string
          example: success
        data:
          $ref: '#/components/schemas/TaskDetailDTO'
        timestamp:
          type: integer
          format: int64

    ApiResponse_OriginalSentenceListResponseDTO:
      type: object
      properties:
        code:
          type: integer
          example: 10200
        message:
          type: string
          example: success
        data:
          $ref: '#/components/schemas/OriginalSentenceListResponseDTO'
        timestamp:
          type: integer
          format: int64

    ApiResponse_SynthesisResultDTO:
      type: object
      properties:
        code:
          type: integer
          example: 10200
        message:
          type: string
          example: success
        data:
          $ref: '#/components/schemas/SynthesisResultDTO'
        timestamp:
          type: integer
          format: int64

    ApiResponse_OriginalSentenceSynthesisStatusDTO:
      type: object
      properties:
        code:
          type: integer
          example: 10200
        message:
          type: string
          example: success
        data:
          $ref: '#/components/schemas/OriginalSentenceSynthesisStatusDTO'
        timestamp:
          type: integer
          format: int64

    ApiResponse_TaskSynthesisStatusDTO:
      type: object
      properties:
        code:
          type: integer
          example: 10200
        message:
          type: string
          example: success
        data:
          $ref: '#/components/schemas/TaskSynthesisStatusDTO'
        timestamp:
          type: integer
          format: int64

    ApiResponse_ReadingRuleCreateResponseDTO:
      type: object
      properties:
        code:
          type: integer
          example: 10200
        message:
          type: string
          example: success
        data:
          $ref: '#/components/schemas/ReadingRuleCreateResponseDTO'
        timestamp:
          type: integer
          format: int64

    ApiResponse_ReadingRuleListPageResponseDTO:
      type: object
      properties:
        code:
          type: integer
          example: 10200
        message:
          type: string
          example: success
        data:
          $ref: '#/components/schemas/ReadingRuleListPageResponseDTO'
        timestamp:
          type: integer
          format: int64

    ApiResponse_MatchingFieldListResponseDTO:
      type: object
      properties:
        code:
          type: integer
          example: 10200
        message:
          type: string
          example: success
        data:
          $ref: '#/components/schemas/MatchingFieldListResponseDTO'
        timestamp:
          type: integer
          format: int64

    ApiResponse_VoiceConfigListResponseDTO:
      type: object
      properties:
        code:
          type: integer
          example: 10200
        message:
          type: string
          example: success
        data:
          $ref: '#/components/schemas/VoiceConfigListResponseDTO'
        timestamp:
          type: integer
          format: int64

    ApiResponse_AudioMergeResponseDTO:
      type: object
      properties:
        code:
          type: integer
          example: 10200
        message:
          type: string
          example: success
        data:
          $ref: '#/components/schemas/AudioMergeResponseDTO'
        timestamp:
          type: integer
          format: int64

    ApiResponse_AudioMergeStatusDTO:
      type: object
      properties:
        code:
          type: integer
          example: 10200
        message:
          type: string
          example: success
        data:
          $ref: '#/components/schemas/AudioMergeStatusDTO'
        timestamp:
          type: integer
          format: int64

    TaskCreateRequest:
      type: object
      required:
        - content
      properties:
        content:
          type: string
          maxLength: 10000
          description: 文本内容，不能为空，最多10000字
          example: 这是一段需要转换为语音的文本内容。支持最多10000字。
        delimiterList:
          type: array
          items:
            type: integer
          description: |
            自定义拆句符号类型数组，可选；为空时使用默认符号集
            1：中文句号（。）
            2：中文叹号（！）
            3：中文问号（？）
            4：中文省略号（…）
          example: [1, 2, 3]

    TaskCreateResponseDTO:
      type: object
      properties:
        taskId:
          type: integer
          format: int64
          description: 任务ID
          example: 1
        content:
          type: string
          description: 任务文本内容
          example: 这是一段需要转换为语音的文本内容。支持最多10000字。
        charCount:
          type: integer
          description: 字符数
          example: 28
        status:
          type: integer
          description: 任务状态
          example: 2
        audioUrl:
          type: string
          nullable: true
          description: 音频URL
          example: null
        audioDuration:
          type: integer
          nullable: true
          description: 音频时长（秒）
          example: null
        originalSentenceList:
          type: array
          description: 拆句列表
          items:
            $ref: '#/components/schemas/OriginalSentenceDTO'
        createdAt:
          type: string
          format: date-time
          description: 创建时间
          example: 2024-01-01T00:00:00
        updatedAt:
          type: string
          format: date-time
          description: 更新时间
          example: 2024-01-01T00:00:00

    TaskDetailDTO:
      type: object
      properties:
        taskId:
          type: integer
          format: int64
          description: 任务ID
          example: 1
        mergeId:
          type: integer
          format: int64
          nullable: true
          description: 合并任务ID
          example: null
        content:
          type: string
          description: 任务文本内容
          example: 这是一段需要转换为语音的文本内容。
        charCount:
          type: integer
          description: 字符数
          example: 18
        status:
          type: integer
          description: 任务状态
          example: 2
        audioUrl:
          type: string
          nullable: true
          description: 音频URL
          example: null
        audioDuration:
          type: integer
          nullable: true
          description: 音频时长（秒）
          example: null
        createdAt:
          type: string
          format: date-time
          description: 创建时间
          example: 2024-01-01T00:00:00
        updatedAt:
          type: string
          format: date-time
          description: 更新时间
          example: 2024-01-01T00:00:00

    OriginalSentenceDTO:
      type: object
      properties:
        originalSentenceId:
          type: integer
          format: int64
          description: 拆句ID
          example: 1
        taskId:
          type: integer
          format: int64
          description: 任务ID
          example: 1
        content:
          type: string
          description: 拆句内容
          example: 这是一段需要转换为语音的文本内容。
        charCount:
          type: integer
          description: 字符数
          example: 18
        sequence:
          type: integer
          description: 序号
          example: 1
        createdAt:
          type: string
          format: date-time
          description: 创建时间
          example: 2024-01-01T00:00:00

    OriginalSentenceListResponseDTO:
      type: object
      properties:
        list:
          type: array
          description: 拆句列表
          items:
            $ref: '#/components/schemas/OriginalSentenceListItemDTO'
        total:
          type: integer
          format: int64
          description: 总记录数
          example: 10
        page:
          type: integer
          description: 当前页码
          example: 1
        pageSize:
          type: integer
          description: 每页大小
          example: 10

    OriginalSentenceListItemDTO:
      type: object
      properties:
        originalSentenceId:
          type: integer
          format: int64
          description: 拆句ID
          example: 1
        sequence:
          type: integer
          description: 序号
          example: 1
        content:
          type: string
          description: 拆句内容
          example: 这是一段需要转换为语音的文本内容。
        synthesisStatus:
          type: integer
          description: 合成状态（0-未合成，1-合成中，2-已合成，3-合成失败）
          example: 2
        breakingSentenceList:
          type: array
          description: 断句列表
          items:
            $ref: '#/components/schemas/BreakingSentenceWithSettingDTO'

    BreakingSentenceWithSettingDTO:
      type: object
      properties:
        breakingSentenceId:
          type: integer
          format: int64
          description: 断句ID
          example: 1
        taskId:
          type: integer
          format: int64
          description: 任务ID
          example: 1
        originalSentenceId:
          type: integer
          format: int64
          description: 拆句ID
          example: 1
        content:
          type: string
          description: 断句内容
          example: 这是一段需要转换为语音的文本内容。
        charCount:
          type: integer
          description: 字符数
          example: 18
        sequence:
          type: integer
          description: 序号
          example: 1
        synthesisStatus:
          type: integer
          description: 合成状态（0-未合成，1-合成中，2-已合成，3-合成失败）
          example: 2
        audioUrl:
          type: string
          nullable: true
          description: 音频URL
          example: https://example.com/audio.mp3
        audioDuration:
          type: integer
          nullable: true
          description: 音频时长（秒）
          example: 5
        ssml:
          type: string
          nullable: true
          description: SSML内容
          example: <speak>这是一段需要转换为语音的文本内容。</speak>
        jobId:
          type: string
          nullable: true
          description: 华为云任务ID
          example: job_123456
        createdAt:
          type: string
          description: 创建时间
          example: 2024-01-01 00:00:00
        updatedAt:
          type: string
          description: 更新时间
          example: 2024-01-01 00:00:00
        setting:
          $ref: '#/components/schemas/BreakingSentenceSettingDTO'

    BreakingSentenceSettingDTO:
      type: object
      properties:
        content:
          type: string
          description: 断句内容
          example: 这是一段需要转换为语音的文本内容。
        volume:
          type: integer
          description: 音量（0-100）
          example: 50
        voiceId:
          type: string
          description: 语音ID
          example: voice_001
        breakList:
          type: array
          description: 停顿配置列表
          items:
            $ref: '#/components/schemas/BreakConfigDTO'
        phonemeList:
          type: array
          description: 多音字配置列表
          items:
            $ref: '#/components/schemas/PhonemeConfigDTO'
        prosodyList:
          type: array
          description: 局部语速配置列表
          items:
            $ref: '#/components/schemas/ProsodyConfigDTO'
        silentList:
          type: array
          description: 静音配置列表
          items:
            $ref: '#/components/schemas/SilenceConfigDTO'

    BreakConfigDTO:
      type: object
      properties:
        location:
          type: string
          description: 停顿位置
          example: "5"
        duration:
          type: string
          description: 停顿时长（毫秒）
          example: "500"

    PhonemeConfigDTO:
      type: object
      properties:
        ph:
          type: string
          description: 音标
          example: "zhong1"
        alphabet:
          type: string
          description: 字母表
          example: "zhong"
        begin:
          type: integer
          description: 开始位置
          example: 0
        end:
          type: integer
          description: 结束位置
          example: 4

    ProsodyConfigDTO:
      type: object
      properties:
        rate:
          type: string
          description: 语速（slow, medium, fast）
          example: "medium"
        begin:
          type: integer
          description: 开始位置
          example: 0
        end:
          type: integer
          description: 结束位置
          example: 10

    SilenceConfigDTO:
      type: object
      properties:
        location:
          type: integer
          description: 静音位置
          example: 5
        duration:
          type: integer
          description: 静音时长（毫秒）
          example: 500

    OriginalSentenceDeleteRequest:
      type: object
      required:
        - originalSentenceId
      properties:
        originalSentenceId:
          type: integer
          format: int64
          description: 拆句ID
          example: 1

    SynthesisBreakingSentenceRequest:
      type: object
      required:
        - breakingSentenceId
      properties:
        breakingSentenceId:
          type: integer
          format: int64
          description: 断句ID
          example: 1

    SynthesisOriginalSentenceRequest:
      type: object
      required:
        - originalSentenceId
      properties:
        originalSentenceId:
          type: integer
          format: int64
          description: 拆句ID
          example: 1

    SynthesisTaskRequest:
      type: object
      required:
        - taskId
      properties:
        taskId:
          type: integer
          format: int64
          description: 任务ID
          example: 1

    SynthesisSetConfigRequest:
      type: object
      properties:
        taskId:
          type: integer
          format: int64
          description: 任务ID
          example: 1
        originalSentenceId:
          type: integer
          format: int64
          description: 拆句ID
          example: 1
        breakingSentenceList:
          type: array
          description: 断句配置列表
          items:
            $ref: '#/components/schemas/BreakingSentenceConfig'

    BreakingSentenceConfig:
      type: object
      properties:
        breakingSentenceId:
          type: integer
          format: int64
          description: 断句ID
          example: 1
        sequence:
          type: integer
          description: 序号
          example: 1
        content:
          type: string
          description: 断句内容
          example: 这是一段需要转换为语音的文本内容。
        volume:
          type: integer
          description: 音量（0-100）
          example: 50
        voiceId:
          type: string
          description: 语音ID
          example: voice_001
        speed:
          type: integer
          description: 语速
          example: 0
        breakList:
          type: array
          description: 停顿配置列表
          items:
            $ref: '#/components/schemas/BreakConfig'
        phonemeList:
          type: array
          description: 多音字配置列表
          items:
            $ref: '#/components/schemas/PhonemeConfig'
        prosodyList:
          type: array
          description: 局部语速配置列表
          items:
            $ref: '#/components/schemas/ProsodyConfig'
        silenceList:
          type: array
          description: 静音配置列表
          items:
            $ref: '#/components/schemas/SilenceConfig'
        readRule:
          type: array
          description: 阅读规范配置列表
          items:
            $ref: '#/components/schemas/ReadRuleConfig'

    BreakConfig:
      type: object
      properties:
        location:
          type: integer
          description: 停顿位置
          example: 5
        duration:
          type: integer
          description: 停顿时长（毫秒）
          example: 500

    PhonemeConfig:
      type: object
      properties:
        ph:
          type: string
          description: 音标
          example: "zhong1"
        location:
          type: integer
          description: 位置
          example: 0

    ProsodyConfig:
      type: object
      properties:
        rate:
          type: integer
          description: 语速
          example: 0
        begin:
          type: integer
          description: 开始位置
          example: 0
        end:
          type: integer
          description: 结束位置
          example: 10

    SilenceConfig:
      type: object
      properties:
        location:
          type: integer
          description: 静音位置
          example: 5
        duration:
          type: integer
          description: 静音时长（毫秒）
          example: 500

    ReadRuleConfig:
      type: object
      properties:
        ruleId:
          type: integer
          format: int64
          description: 规则ID
          example: 1
        partern:
          type: string
          description: 匹配模式（注意：文档中是 "partern" 不是 "pattern"）
          example: "\\d+"
        isOpen:
          type: boolean
          description: 是否开启
          example: true

    SynthesisResultDTO:
      type: object
      properties:
        audioUrl:
          type: string
          nullable: true
          description: 音频URL
          example: https://example.com/audio.mp3
        audioDuration:
          type: integer
          nullable: true
          description: 音频时长（秒）
          example: 5
        synthesisStatus:
          type: integer
          description: 合成状态（0-未合成，1-合成中，2-已合成，3-合成失败）
          example: 2

    OriginalSentenceSynthesisStatusDTO:
      type: object
      properties:
        status:
          type: integer
          description: 整体状态（0-未合成，1-合成中，2-已合成，3-合成失败）
          example: 2
        progress:
          type: integer
          description: 进度百分比（0-100）
          example: 100
        total:
          type: integer
          description: 总断句数
          example: 10
        completed:
          type: integer
          description: 已完成数
          example: 10
        pending:
          type: integer
          description: 待处理数
          example: 0
        audioUrlList:
          type: array
          description: 音频URL列表
          items:
            $ref: '#/components/schemas/AudioUrlItem'

    AudioUrlItem:
      type: object
      properties:
        sequence:
          type: integer
          description: 序号
          example: 1
        audioUrl:
          type: string
          description: 音频URL
          example: https://example.com/audio1.mp3

    TaskSynthesisStatusDTO:
      type: object
      properties:
        status:
          type: integer
          description: 整体状态（0-未合成，1-合成中，2-已合成，3-合成失败）
          example: 2
        progress:
          type: integer
          description: 进度百分比（0-100）
          example: 100
        total:
          type: integer
          description: 总断句数
          example: 100
        completed:
          type: integer
          description: 已完成数
          example: 100
        pending:
          type: integer
          description: 待处理数
          example: 0
        audioUrlList:
          type: array
          description: 音频URL列表
          items:
            $ref: '#/components/schemas/AudioUrlItem'

    TtsCallbackRequest:
      type: object
      properties:
        status:
          type: string
          description: |
            任务状态
            FINISHED - 已完成
            ERROR - 失败
            WAITING - 等待中
          example: FINISHED
        job_id:
          type: string
          description: 任务ID（华为云返回的job_id）
          example: job_123456
        audio_file_download_url:
          type: string
          nullable: true
          description: 音频文件下载URL
          example: https://example.com/audio.mp3
        subtitle_file_download_url:
          type: string
          nullable: true
          description: 字幕文件下载URL（可选）
          example: https://example.com/subtitle.srt
        audio_duration:
          type: integer
          nullable: true
          description: 音频时长（秒）
          example: 5

    ReadingRuleCreateRequest:
      type: object
      required:
        - pattern
        - ruleType
        - ruleValue
      properties:
        pattern:
          type: string
          description: 原始词（匹配模式）
          example: "\\d+"
        ruleType:
          type: integer
          minimum: 1
          maximum: 3
          description: |
            规范类型：
            1：数字英文
            2：音标调整
            3：专有词汇
          example: 1
        ruleValue:
          type: string
          description: |
            自定义读法，类型为SAY_AS时，只允许传下面的值。
            number：数字
            date：日期
            figure：数值
            phone：电话号码
            english：英文单词
            spell：逐个字母读英文
          example: "number"

    ReadingRuleCreateResponseDTO:
      type: object
      properties:
        ruleId:
          type: integer
          format: int64
          description: 规则ID
          example: 1
        taskId:
          type: integer
          format: int64
          nullable: true
          description: 任务ID
          example: null
        pattern:
          type: string
          description: 原始词（匹配模式）
          example: "\\d+"
        ruleType:
          type: integer
          description: 规范类型（1-数字英文，2-音标调整，3-专有词汇）
          example: 1
        ruleValue:
          type: string
          description: 自定义读法
          example: "number"
        scope:
          type: integer
          description: 作用域
          example: 1
        createdAt:
          type: string
          description: 创建时间
          example: 2024-01-01 00:00:00

    ReadingRuleSetGlobalSettingRequest:
      type: object
      properties:
        taskId:
          type: integer
          format: int64
          description: 任务ID
          example: 1
        ruleId:
          type: integer
          format: int64
          description: 规则ID
          example: 1
        isOpen:
          type: boolean
          description: 是否开启（0关闭，1打开）
          example: true
        breakingSentenceId:
          type: integer
          format: int64
          nullable: true
          description: |
            断句ID（可选），如果有值则type=1（任务级），如果为空则type=2（断句级）
          example: null

    ReadingRuleListPageResponseDTO:
      type: object
      properties:
        readingRuleList:
          type: array
          description: 阅读规范列表
          items:
            $ref: '#/components/schemas/ReadingRuleListItemDTO'
        total:
          type: integer
          description: 总记录数
          example: 10
        page:
          type: integer
          description: 当前页码
          example: 1
        pageSize:
          type: integer
          description: 每页大小
          example: 10

    ReadingRuleListItemDTO:
      type: object
      properties:
        ruleId:
          type: integer
          format: int64
          description: 规则ID
          example: 1
        pattern:
          type: string
          description: 原始词（匹配模式）
          example: "\\d+"
        ruleType:
          type: integer
          description: 规范类型（1-数字英文，2-音标调整，3-专有词汇）
          example: 1
        ruleValue:
          type: string
          description: 自定义读法
          example: "number"
        isOpen:
          type: boolean
          description: 是否开启
          example: true

    MatchingFieldListResponseDTO:
      type: object
      properties:
        total:
          type: integer
          description: 匹配字段总数
          example: 5
        fieldList:
          type: array
          description: 匹配字段列表
          items:
            $ref: '#/components/schemas/MatchingFieldDTO'

    MatchingFieldDTO:
      type: object
      properties:
        ruleId:
          type: integer
          format: int64
          description: 规则ID
          example: 1
        location:
          type: integer
          description: 匹配字段第一个字符的位置
          example: 0
        pattern:
          type: string
          description: 字段
          example: "123"
        isOpen:
          type: boolean
          description: 是否开启
          example: true

    VoiceConfigListResponseDTO:
      type: object
      properties:
        list:
          type: array
          description: 语音配置列表
          items:
            $ref: '#/components/schemas/VoiceConfigDTO'

    VoiceConfigDTO:
      type: object
      properties:
        voiceId:
          type: string
          description: 语音ID
          example: voice_001
        voiceName:
          type: string
          description: 语音名称
          example: 标准女声
        voiceType:
          type: string
          description: 语音类型
          example: female
        sortOrder:
          type: integer
          description: 排序顺序
          example: 1
        avatar_url:
          type: string
          nullable: true
          description: 头像URL
          example: https://example.com/avatar.jpg

    AudioMergeRequest:
      type: object
      required:
        - taskId
      properties:
        taskId:
          type: integer
          format: int64
          description: 任务ID
          example: 1

    AudioMergeResponseDTO:
      type: object
      properties:
        mergeId:
          type: integer
          format: int64
          description: 合并任务ID
          example: 1

    AudioMergeStatusDTO:
      type: object
      properties:
        taskId:
          type: integer
          format: int64
          description: 任务ID
          example: 1
        mergedAudioUrl:
          type: string
          nullable: true
          description: 合并后的音频URL
          example: https://example.com/merged_audio.mp3
        audioDuration:
          type: integer
          nullable: true
          description: 音频时长（秒）
          example: 300
        status:
          type: integer
          description: 合并状态（0-未开始，1-合并中，2-已完成，3-失败）
          example: 2
